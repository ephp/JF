{% extends '::base.html.twig' %}

{% block body -%}
<div class="page-header">
    <div class="icon">
        <span class="ico-calendar"></span>
    </div>
    <h1>Calendario personale</h1>
</div>

<div class="row-fluid">
    <div class="span8">
        <div class="block calendar">
            <div id="mydatepicker"></div>
        </div>
    </div>
    <div class="span4">
        <div class="block">
            <dl>
            {% set g = {} %}
            {% for evento in eventi %}
                <dt>{{ evento.dataOra|date('d-m-Y') }} - {{ evento.titolo }}</dt>
                <dd>{{ evento.note }}</dd>
            {% endfor %}
            </dl>
        </div>
    </div>
</div>

<script type="text/javascript">
    $( "#mydatepicker" ).datepicker({
        dateFormat: 'dd-mm-yy',
        closeText: 'Chiudi', 
        prevText: 'Perc.', 
        nextText: 'Prox.', 
        currentText: 'Oggi', 
        monthNames: ['Gennaio', 'Febbraio', 'Marzo', 'Aprile', 'Maggio', 'Giugno', 'Luglio', 'Agosto', 'Settembre', 'Ottobre', 'Novembre', 'Dicembre'],
        monthNamesShort: ['Gen', 'Feb', 'Mar', 'Apr', 'Mag', 'Giu', 'Lug', 'Ago', 'Set', 'Ott', 'Nov', 'Dic'],
        dayNames: ['Lunedì', 'Martedì', 'Mercoledì', 'Giovedì', 'Venerdì', 'Sabato', 'Domenica'], 
        dayNamesShort: ['Dom', 'Lun', 'Mar', 'Mer', 'Gio', 'Ven', 'Sab'], 
        dayNamesMin: ['D', 'L', 'Ma', 'Me', 'G', 'V', 'S'], 
        firstDay: 1,
        weekHeader: "S", 
        onSelect: function(date){
            alert(date);
        },
        onChangeMonthYear: function(year, month) {
            alert(month+'/'+year);
        }
    });
    
    {% for giorno, n in giorni %}
        setGiorno({{ giorno }}, {{ n }});
    {% endfor %}
        
    function setGiorno(giorno, n) {
        $('.calendar td').find('a').each(function() {
            if($(this).html() == giorno) {
                $(this).after('<div class="ncal">'+n+'</div>');
            }
        });
    }
</script>   
{% endblock %}
